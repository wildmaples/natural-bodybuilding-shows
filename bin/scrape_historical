#!/usr/bin/env ruby

require_relative '../lib/scrape_historical_ocb'

puts "ğŸ” Starting historical OCB scraping..."
puts "Fetching past shows from January 2025 to now..."

scraper = HistoricalOcbScraper.new
events = scraper.scrape_historical_events

if events.any?
  puts "âœ… Successfully scraped #{events.length} historical events"
  scraper.save_historical_events(events)
  puts "ğŸ’¾ Historical events saved to database"
  
  puts "\nğŸ—“ï¸ Historical events found:"
  events.each do |name, data|
    date_str = data["date"].is_a?(Date) ? data["date"].strftime("%b %d, %Y") : data["date"]
    location = data["location"] || data["state"] || "Unknown location"
    puts "  â€¢ #{date_str}: #{name} (#{location})"
  end
else
  puts "âŒ No historical events found"
end

puts "\nğŸš€ Done! Start the web app to see past shows in the Past Shows tab." 